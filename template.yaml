apiVersion: backstage.io/v1beta3
kind: Template
metadata:
  name: api-express-template
  title: Node.js API w/ Express.js
  description: A template for provisioning Express.js APIs with built-in CI/CD and code quality tools
spec:
  owner: user:guest
  type: service


  parameters:
    - title: Project Info
      required:
        - name
        - owner
      properties:
        name:
          title: Name
          type: string
          description: Unique component name
          ui:
            autofocus: true
        owner:
          title: Owner
          type: string
          description: Component owner
          ui:
            field: OwnerPicker
            options:
              catalogFilter:
                kind: [User, Group]


    # - title: Choose Location
    #   required:
    #     - repoUrl
    #   properties:
    #     repoUrl:
    #       title: Repository Location
    #       type: string
    #       ui:
    #         field: RepoUrlPicker
    #         options:
    #           allowedHosts:
    #             - github.com


  # steps:
  #   - id: fetch-base
  #     name: Fetch Base
  #     action: fetch:template
  #     input:
  #       url: https://github.com/ardylin/backstage-poc-update-file
  #       values:
  #         name: ${{ parameters.name }}
  #         owner: ${{ parameters.owner }}


    # - id: publish
    #   name: Publish to GitHub
    #   action: publish:github
    #   input:
    #     allowedHosts: ['github.com']
    #     description: Project ${{ parameters.name }}
    #     repoUrl: ${{ parameters.repoUrl }}


    # - id: register
    #   name: Register Component
    #   action: catalog:register
    #   input:
    #     repoContentsUrl: ${{ steps.publish.output.repoContentsUrl }}
    #     catalogInfoPath: /catalog-info.yaml


  # output:
  #   links:
  #     - title: Repository
  #       url: ${{ steps.publish.output.remoteUrl }}
  #     - title: Open in Catalog
  #       icon: catalog
  #       entityRef: ${{ steps.register.output.entityRef }}
